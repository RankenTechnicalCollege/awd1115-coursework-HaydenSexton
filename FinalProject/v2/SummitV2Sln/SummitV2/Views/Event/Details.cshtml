@model Event

@{
    ViewData["Title"] = $"{Model.Title} – Event Details";
}

<div class="container mt-4 text-light">

    <div class="card shadow-lg mb-4 bg-black border-info">
        <div class="card-body">

            @if (TempData["Message"] != null)
            {
                <div class="alert alert-success">@TempData["Message"]</div>
            }


            <h1 class="display-6 fw-bold text-info">@Model.Title</h1>

            <p class="text-light-50 mb-1">
                Event Date:
                <strong class="text-info">@Model.EventDate?.ToString("MMMM dd, yyyy • hh:mm tt")</strong>
            </p>

            <p class="text-light-50 mb-1">
                Clan:
                <a asp-controller="Clan"
                   asp-action="Details"
                   asp-route-id="@Model.ClanId"
                   class="text-info fw-bold text-decoration-none">
                    @Model.Clan?.Name
                </a>
            </p>

            <p class="text-light-50">
                Organized by:
                <strong class="text-info">@Model.ApplicationUser?.UserName</strong>
            </p>

            <hr class="border-info" />

            <p class="fs-5">@Model.Description</p>

        </div>
    </div>

    <!-- later on, will only be for event creator or admins -->

    <div class="mb-3">
        <a asp-controller="Event"
           asp-action="AddEdit"
           asp-route-id="@Model.EventId"
           class="btn btn-warning fw-bold shadow-sm">
            <i class="fas fa-plus"></i> Edit Event
        </a>

        <button class="btn btn-danger fw-bold shadow-sm"
                data-bs-toggle="modal"
                data-bs-target="#deleteEventModal">
            Delete Event
        </button>
    </div>


    <a asp-controller="Clan"
       asp-action="Details"
       asp-route-id="@Model.ClanId"
       class="btn btn-outline-light mt-3 shadow-sm">
        Back to Clan
    </a>

</div>

<div class="modal fade" id="deleteEventModal" tabindex="-1" aria-labelledby="deleteEventLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark text-light border-danger">

            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="deleteEventLabel">Confirm Delete</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">
                <p>Are you sure you want to delete the event:</p>
                <h5 class="fw-bold text-danger">@Model.Title</h5>

                <p class="text-light-50 mt-2">
                    This action cannot be undone.
                </p>
            </div>

            <div class="modal-footer">
                <button type="button"
                        class="btn btn-secondary"
                        data-bs-dismiss="modal">
                    Cancel
                </button>

                <form asp-controller="Event"
                      asp-action="Delete"
                      method="post"
                      class="d-inline">

                    <input type="hidden" name="id" value="@Model.EventId" />

                    <button type="submit" class="btn btn-danger">
                        Yes, Delete
                    </button>
                </form>


            </div>

        </div>
    </div>
</div>
